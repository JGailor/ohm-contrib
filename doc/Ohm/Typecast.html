<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: Ohm::Typecast</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Ohm.html" title="Ohm (module)">Ohm</a></span></span>
     &raquo; 
    <span class="title">Typecast</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: Ohm::Typecast
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/ohm/contrib/typecast.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Provides unobtrusive, non-explosive typecasting.Instead of exploding on set
of an invalid value, this module takes the approach of just taking in
parameters and letting you do validation yourself. The only thing this
module does for you is the boilerplate casting you might need to do.
</p>
<p>
The Typecasted way
</p>
<hr style="height: 10px"></hr><pre class="code">
  <span class='kw'>class</span> <span class='const'>Item</span> <span class='op'>&lt;</span> <span class='const'>Ohm</span><span class='op'>::</span><span class='const'>Model</span>
    <span class='id include'>include</span> <span class='const'>Ohm</span><span class='op'>::</span><span class='const'>Typecast</span>

    <span class='id attribute'>attribute</span> <span class='symbol'>:price</span><span class='comma'>,</span> <span class='const'>Decimal</span>
    <span class='id attribute'>attribute</span> <span class='symbol'>:posted</span><span class='comma'>,</span> <span class='const'>Time</span>
  <span class='kw'>end</span>

  <span class='id item'>item</span> <span class='op'>=</span> <span class='const'>Item</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:price</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>299</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:posted</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id utc'>utc</span><span class='rparen'>)</span>
  <span class='id item'>item</span> <span class='op'>=</span> <span class='const'>Item</span><span class='lbracket'>[</span><span class='id item'>item</span><span class='period'>.</span><span class='id id'>id</span><span class='rbracket'>]</span>
  <span class='id item'>item</span><span class='period'>.</span><span class='id price'>price</span><span class='period'>.</span><span class='id class'>class</span> <span class='op'>==</span> <span class='const'>Ohm</span><span class='op'>::</span><span class='const'>Types</span><span class='op'>::</span><span class='const'>Decimal</span>
  <span class='comment'># =&gt; true
</span>
  <span class='id item'>item</span><span class='period'>.</span><span class='id price'>price</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>299</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># =&gt; true
</span>
  <span class='id item'>item</span><span class='period'>.</span><span class='id price'>price</span> <span class='op'>*</span> <span class='int'>2</span> <span class='op'>==</span> <span class='int'>598</span>
  <span class='comment'># =&gt; true
</span>
  <span class='id item'>item</span><span class='period'>.</span><span class='id posted'>posted</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%m/%d/%Y</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; works!!!</span></pre>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">
<span class='comment'># without typecasting
</span><span class='kw'>class</span> <span class='const'>Item</span> <span class='op'>&lt;</span> <span class='const'>Ohm</span><span class='op'>::</span><span class='const'>Model</span>
  <span class='id attribute'>attribute</span> <span class='symbol'>:price</span>
  <span class='id attribute'>attribute</span> <span class='symbol'>:posted</span>
<span class='kw'>end</span>

<span class='id item'>item</span> <span class='op'>=</span> <span class='const'>Item</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:price</span> <span class='op'>=&gt;</span> <span class='int'>299</span><span class='comma'>,</span> <span class='symbol'>:posted</span> <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id utc'>utc</span><span class='rparen'>)</span>
<span class='id item'>item</span> <span class='op'>=</span> <span class='const'>Item</span><span class='lbracket'>[</span><span class='id item'>item</span><span class='period'>.</span><span class='id id'>id</span><span class='rbracket'>]</span>

<span class='comment'># now when you try and grab `item.price`, its a string.
</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>299</span><span class='tstring_end'>&quot;</span></span> <span class='op'>==</span> <span class='id item'>item</span><span class='period'>.</span><span class='id price'>price</span>
<span class='comment'># =&gt; true
</span>
<span class='comment'># you can opt to manually cast everytime, or do it in the model, i.e.
</span>
<span class='kw'>class</span> <span class='const'>Item</span>
  <span class='kw'>def</span> <span class='id price'>price</span>
    <span class='const'>BigDecimal</span><span class='lparen'>(</span><span class='id read_local'>read_local</span><span class='lparen'>(</span><span class='symbol'>:price</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    
  </div>

</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Typecast/ClassMethods.html" title="Ohm::Typecast::ClassMethods (module)">ClassMethods</a></span>
    
   
    
  
</p>





</div>
    
    <div id="footer">
  Generated on Tue Sep 28 17:11:36 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>